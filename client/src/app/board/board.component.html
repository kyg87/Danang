<div class="container">
  <div class="at-content-main">



    <style>
      .amina-header {
        line-height: 22px;
        margin-bottom: 15px;
      }

      .amina-header .header-breadcrumb {
        margin-top: 4px;
      }

      @media all and (max-width:460px) {
        .responsive .amina-header .header-breadcrumb {
          display: none;
        }
      }
    </style>
    <div class="amina-header">
      <span class="header-breadcrumb pull-right text-muted">
        <i class="fa fa-home"></i> 홈 &gt; 참여공간 &gt; 참여공간 </span>
      <div class="div-title-underbar font-18">
        <span class="div-title-underbar-bold border-black">
          <b>참여공간</b>
        </span>
      </div>
    </div>
    <script src="http://yjsosic.com/js/viewimageresize.js"></script>

    <div class="view-wrap">


      <h1>
        {{board.title}}</h1>

      <div class="panel panel-default view-head no-attach">
        <div class="panel-heading">
          <div class="font-12 text-muted">
            <i class="fa fa-user"></i>
            <a href="javascript:;" onclick="showSideView(this, '', '김', '', '');">
              <span class="guest">{{board.writer}}</span>
            </a>
            
       
            <span class="hidden-xs pull-right">
              <i class="fa fa-clock-o"></i>
              19분전 </span>
          </div>
        </div>
      </div>


      <div class="view-img">
      </div>

      <div class="view-content">
        {{board.content}}</div>




      <div class="view-icon">
        <div class="pull-right">
          <div class="form-group">
            <button onclick="apms_shingo('community_1', '86');" class="btn btn-black btn-xs">
              <i class="fa fa-bell"></i>
              <span class="hidden-xs">신고</span>
            </button>
          </div>
        </div>
        <div class="pull-left">
          <div class="form-group">
          </div>
        </div>
        <div class="clearfix"></div>
      </div>


      <script>
        // 글자수 제한
        var char_min = parseInt(0); // 최소
        var char_max = parseInt(0); // 최대
      </script>

      <script src="//code.jquery.com/ui/1.10.4/jquery-ui.min.js"></script>
      <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
      <link rel="stylesheet" href="http://yjsosic.com/skin/board/Miso-Basic/view/talk_mention_v1.2/css/jquery.atwho.css">
      <link rel="stylesheet" href="http://yjsosic.com/skin/board/Miso-Basic/view/talk_mention_v1.2/css/talk.css">
      <script src="http://yjsosic.com/skin/board/Miso-Basic/view/talk_mention_v1.2/js/jquery.atwho.min.js"></script>
      <script src="http://yjsosic.com/skin/board/Miso-Basic/view/talk_mention_v1.2/js/jquery.autogrow.js"></script>
      <script type="text/javascript" src="http://ichord.github.io/Caret.js/src/jquery.caret.js"></script>

      <div class="view-comment font-18 en">
        <i class="fa fa-commenting"></i>
        <span class="orangered">0</span> Comments
      </div>

      <div id="viewcomment" class="view-comment-box">
        <article class="anb_vbo">
          <section id="vcmt_anchor" class="vbo_vcmt vbo_vcmt_chat comment-media">
          </section>

        </article>
      </div>

      <div class="print-hide ">
        <div id="vbo_wcmt">
          <form id="fviewcomment" name="fviewcomment_wrap_chat" action="./write_comment_update.page.php" onsubmit="return fviewcomment_submit(this);"
            method="post" autocomplete="off" class="form" role="form">
            <input type="hidden" name="w" value="c" id="w">
            <input type="hidden" name="bo_table" value="community_1">
            <input type="hidden" name="wr_id" value="86">
            <input type="hidden" name="comment_id" value="" id="comment_id">
            <input type="hidden" name="comment_url" value="./view_comment.page.php?bo_table=community_1&amp;wr_id=86&amp;crows=20" id="comment_url">
            <input type="hidden" name="crows" value="20">
            <input type="hidden" name="page" value="" id="comment_page">
            <input type="hidden" name="is_good" value="">
            <div class="comment-box">
              <div class="pull-left help-block hidden-xs">
                <i class="fa fa-commenting-o"></i> 상업광고, 인신공격, 비방, 욕설 등은 임의로 삭제될 수 있으며 형사처벌의 대상이 됩니다.
              </div>
  

              <div class="form-group comment-content">
                <div class="comment-cell">
                  <textarea tabindex="13" id="wr_content" name="wr_content" maxlength="10000" rows="5" class="form-control input-sm" title="내용"
                    style="height: 90px;"></textarea>
                  <script>
                    $("textarea#wr_content[maxlength]").live("keyup change", function () {
                      var str = $(this).val()
                      var mx = parseInt($(this).attr("maxlength"))
                      if (str.length > mx) {
                        $(this).val(str.substr(0, mx));
                        return false;
                      }
                    });
                  </script>
                </div>
                <div tabindex="14" class="comment-cell comment-submit" onclick="apms_comment('viewcomment');" onkeydown="apms_comment_onKeyDown();"
                  id="btn_submit">
                  등록
                </div>
                <script>
                  function apms_comment_onKeyDown() {
                    if (event.keyCode == 13) {
                      apms_comment('viewcomment');
                    }
                  }
                </script>
              </div>

              

            

            </div>
          </form>
        </div>


        <script>		
          $('#vcmt_anchor').scrollTop($('#vcmt_anchor').prop('scrollHeight'));

          jQuery.fn.putCursorAtEnd = function () {
            return this.each(function () {

              var $el = $(this),
                el = this;

              if (!$el.is(":focus")) {
                $el.focus();
              }

              // If this function exists... (IE 9+)
              if (el.setSelectionRange) {

                var len = $el.val().length * 2;
                setTimeout(function () {
                  el.setSelectionRange(len, len);
                }, 1);

              } else {

                $el.val($el.val());

              }

              // Scroll to the bottom, in case we're in a tall textarea
              // (Necessary for Firefox and Chrome)
              //this.scrollTop = 999999;

            });
          };


          jQuery(document).on("keydown", "#wr_content", function (e) {
            if (e.keyCode === 9) { //Tab
              e.preventDefault(); //이벤트 동작중단
              jQuery("#wcmt_btn_submit").focus();
            }
          });

          var save_before = '';
          var save_html = document.getElementById('vbo_wcmt').innerHTML;

          function good_and_write() {
            var f = document.fviewcomment;
            if (fviewcomment_submit(f)) {
              f.is_good.value = 1;
              f.submit();
            } else {
              f.is_good.value = 0;
            }
          }

          function fviewcomment_submit(f) {
            var pattern = /(^\s*)|(\s*$)/g; // \s 공백 문자

            f.is_good.value = 0;

            var subject = "";
            var content = "";
            $.ajax({
              url: g5_bbs_url + "/ajax.filter.php",
              type: "POST",
              data: {
                "subject": "",
                "content": f.wr_content.value
              },
              dataType: "json",
              async: false,
              cache: false,
              success: function (data, textStatus) {
                subject = data.subject;
                content = data.content;
              }
            });

            if (content) {
              alert("내용에 금지단어('" + content + "')가 포함되어있습니다");
              f.wr_content.focus();
              return false;
            }

            // 양쪽 공백 없애기
            var pattern = /(^\s*)|(\s*$)/g; // \s 공백 문자
            document.getElementById('wr_content').value = document.getElementById('wr_content').value.replace(pattern, "");
            if (char_min > 0 || char_max > 0) {
              check_byte('wr_content', 'char_count');
              var cnt = parseInt(document.getElementById('char_count').innerHTML);
              if (char_min > 0 && char_min > cnt) {
                alert("댓글은 " + char_min + "글자 이상 쓰셔야 합니다.");
                return false;
              } else if (char_max > 0 && char_max < cnt) {
                alert("댓글은 " + char_max + "글자 이하로 쓰셔야 합니다.");
                return false;
              }
            }
            else if (!document.getElementById('wr_content').value) {
              alert("댓글을 입력하여 주십시오.");
              return false;
            }

            if (typeof (f.wr_name) != 'undefined') {
              f.wr_name.value = f.wr_name.value.replace(pattern, "");
              if (f.wr_name.value == '') {
                alert('이름이 입력되지 않았습니다.');
                f.wr_name.focus();
                return false;
              }
            }

            if (typeof (f.wr_password) != 'undefined') {
              f.wr_password.value = f.wr_password.value.replace(pattern, "");
              if (f.wr_password.value == '') {
                alert('비밀번호가 입력되지 않았습니다.');
                f.wr_password.focus();
                return false;
              }
            }

            if (!chk_captcha()) return false;

            set_comment_token(f);

            document.getElementById("btn_submit").disabled = "disabled";

            return true;
          }

          function comment_box(comment_id, work) {
            var el_id,
              form_el = 'fviewcomment',
              respond = document.getElementById(form_el);

            // 댓글 아이디가 넘어오면 답변, 수정
            if (comment_id) {
              if (work == 'c')
                el_id = 'reply_' + comment_id;
              else
                el_id = 'edit_' + comment_id;
            }
            else
              el_id = 'vbo_wcmt';

            var comm = document.getElementById(el_id);

            if (save_before != el_id) {
              if (save_before) {
                document.getElementById(save_before).style.display = 'none';
                document.getElementById(save_before).innerHTML = '';
              }

              comm.style.display = '';
              comm.appendChild(respond);

              //IE  에서 댓글 수정시 403에러 재정의
              document.getElementById(el_id).style.display = '';
              document.getElementById(el_id).innerHTML = save_html;


              // 댓글 수정
              if (work == 'cu') {
                document.getElementById('wr_content').value = document.getElementById('save_comment_' + comment_id).value;
                if (typeof char_count != 'undefined')
                  check_byte('wr_content', 'char_count');
                if (document.getElementById('secret_comment_' + comment_id).value)
                  document.getElementById('wr_secret').checked = true;
                else
                  document.getElementById('wr_secret').checked = false;
              }

              document.getElementById('comment_id').value = comment_id;
              document.getElementById('w').value = work;

              // 페이지
              if (comment_id) {
                document.getElementById('comment_page').value = document.getElementById('comment_page_' + comment_id).value;
                document.getElementById('comment_url').value = document.getElementById('comment_url_' + comment_id).value;
              } else {
                document.getElementById('comment_page').value = '';
                document.getElementById('comment_url').value = './view_comment.page.php?bo_table=community_1&wr_id=86&crows=20';
              }

              if (save_before)
                $("#captcha_reload").trigger("click");

              save_before = el_id;
              $("#" + el_id).find("textarea").autogrow();
            }
          }

          comment_box('', 'c'); // 댓글 입력폼이 보이도록 처리하기위해서 추가 (root님)

          function comment_delete() {
            return confirm("이 댓글을 삭제하시겠습니까?");
          }

          function mention_comment_box(comment_id, work, target_nick) {    //멘션추가

            var vbo_wcmt = "vbo_wcmt";
            $vbo_wcmt = $("#" + vbo_wcmt),
              form_el = 'fviewcomment';

            $vbo_wcmt.show();

            save_before = 'vbo_wcmt';

            if (!$vbo_wcmt.find("#" + form_el).length) {
              $vbo_wcmt.append($("#" + form_el));
            }

            console.log("높이" + $vbo_wcmt.offset().top);

            var scroll_top = $vbo_wcmt.offset().top,
              animate_complete = function () {

                $("#" + form_el).find("#wr_content").val("@" + target_nick + " ").putCursorAtEnd().trigger('focus');

                // 해당 답변 아래에 붙음
                document.getElementById('comment_id').value = comment_id;
                document.getElementById('w').value = work;

                $vbo_wcmt.find("textarea").autogrow();
              };

            if ($(window).scrollTop() == scroll_top || g5_is_mobile) {
              animate_complete();
            } else {
              $("html,body").animate({ scrollTop: scroll_top }, {
                duration: 500,
                complete: animate_complete
              });
            }
          }

        </script>

        <script type="text/javascript">
          (function ($) {
            var cachequeryMentions = [],
              itemsMentions = null,
              data_url = "http://yjsosic.com/skin/board/Miso-Basic/view/talk_mention_v1.2/mention.php",
              limit = (typeof g5_is_mobile != "undefined" && g5_is_mobile) ? 4 : 10;

            $('#wr_content').atwho({
              at: "@",
              data: null,
              displayTpl: "<li>${img} ${name} </li>",
              limit: limit,
              callbacks: {
                filter: function (query, data, searchKey) {
                  var _results, i, item, len;
                  _results = [];

                  return _results;
                },
                remoteFilter: function (query, render_view) {
                  var thisVal = query,
                    self = $(this);
                  if (!self.data('active') && thisVal.length >= 1) {
                    self.data('active', true);
                    itemsMentions = cachequeryMentions[thisVal]
                    if (typeof itemsMentions == "object") {
                      render_view(itemsMentions);
                    } else {
                      if (self.xhr) {
                        self.xhr.abort();
                      }
                      self.xhr = $.getJSON(data_url, {
                        s: thisVal
                      }, function (data) {
                        cachequeryMentions[thisVal] = data;
                        render_view(data);
                      });
                    }
                    self.data('active', false);
                  }
                },
                sorter: function (query, items, searchKey) {
                  var _results, i, item, len;
                  if (!query) {
                    return items;
                  }
                  _results = [];

                  for (i = 0, len = items.length; i < len; i++) {
                    item = items[i];
                    //console.log(item);
                    item.atwho_order = new String(item[searchKey]).toLowerCase().indexOf(query.toLowerCase());
                    var pattern = /([ㄱ-ㅎ])/i;     //한글 초성은 체크하지 않습니다.
                    if (pattern.test(query)) {
                      _results.push(item);
                    } else {
                      if (item.atwho_order > -1) {
                        _results.push(item);
                      }
                    }
                  }
                  return _results.sort(function (a, b) {
                    return a.atwho_order - b.atwho_order;
                  });
                },
                matcher: function (flag, subtext, should_startWithSpace, acceptSpaceBar) {
                  var _a, _y, match, regexp, space;
                  flag = flag.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
                  if (should_startWithSpace) {
                    flag = '(?:^|\\s)' + flag;
                  }
                  _a = decodeURI("%C3%80");
                  _y = decodeURI("%C3%BF");
                  space = acceptSpaceBar ? "\ " : "";
                  regexp = new RegExp(flag + "([가-힣ㄱ-ㅎA-Za-z" + _a + "-" + _y + "0-9_" + space + "\'\.\+\-]*)$|" + flag + "([^\\x00-\\xff]*)$", 'gi');
                  match = regexp.exec(subtext);

                  if (match) {
                    return match[2] || match[1];
                  } else {
                    return null;
                  }
                },
              }
            });
          })(jQuery);

          $(function () {
            $("#wr_content").autogrow();
            //resize_comment_image(500);
          });

        </script>

      </div>
      <!-- Print-Hide -->


      <style>
        .atwho-view {
          /*display:block !important;*/
          font-size: 13px !important;
          min-width: 150px !important;
        }

        .no_mb_img {
          display: inline-block;
          width: 22px;
          height: 22px;
          vertical-align: middle;
          background: url(http://yjsosic.com/skin/board/Miso-Basic/view/talk_mention_v1.2/img/no_mb_img.png);
        }
      </style>

      <script src="http://yjsosic.com/js/md5.js"></script>

      <div class="clearfix"></div>

      <div class="view-btn text-right">
        <div class="btn-group" role="group">
          <a role="button" href="./password.php?w=d&amp;bo_table=community_1&amp;wr_id=86&amp;page=" class="btn btn-black btn-sm" title="삭제"
            onclick="del(this.href); return false;">
            <i class="fa fa-times"></i>
            <span class="hidden-xs"> 삭제</span>
          </a>
          <a role="button" href="./password.php?w=u&amp;bo_table=community_1&amp;wr_id=86&amp;page=" class="btn btn-black btn-sm" title="수정">
            <i class="fa fa-plus"></i>
            <span class="hidden-xs"> 수정</span>
          </a>
          <a role="button" routerLink="/freeboard" class="btn btn-black btn-sm">
            <i class="fa fa-bars"></i>
            <span class="hidden-xs"> 목록</span>
          </a>
          <a role="button" href="./write.php?w=r&amp;bo_table=community_1&amp;wr_id=86" class="btn btn-black btn-sm">
            <i class="fa fa-commenting"></i>
            <span class="hidden-xs"> 답변</span>
          </a>
          <a role="button" href="./write.php?bo_table=community_1" class="btn btn-color btn-sm">
            <i class="fa fa-pencil"></i>
            <span class="hidden-xs"> 글쓰기</span>
          </a>
        </div>
        <div class="clearfix"></div>
      </div>
    </div>
    

    







    <!-- } 게시판 목록 끝 -->

    <div class="h20"></div>
    <script src="http://yjsosic.com/js/sns.js"></script>
  </div>
</div>